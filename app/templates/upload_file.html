{% extends "templates/public_template.html" %}

{% block title %}Upload{% endblock %}

{% block main %}

<div class="container">
  <div class="row">
    <div class="col">

      <h1>Convert 2-Dimensional map to list of plots</h1>
      <hr>

      <form action="/upload-file" method="POST" enctype="multipart/form-data">
        <div class="form-group">
          <label>Allowed files: xlsx, xls</label>
          <div class="custom-file">
            <input type="file" class="custom-file-input" name="file" id="file-upload">
            <label class="custom-file-label" for="file-upload">Select file to convert..</label>
          </div>
        </div>
      
        <button type="submit" class="btn btn-primary">Convert and Download</button>

    <script>
        $('#file-upload').on('change',function(){
            //get the file name
            var fileName = $(this).val();
            var cleanFileName = fileName.replace('C:\\fakepath\\', " ");
            //replace the "Choose a file" label
            $(this).next('.custom-file-label').html(cleanFileName);
        })
    </script>
   </form>
      {% with messages = get_flashed_messages() %}
      {% if messages %}
      {% for msg in messages %}
      <p>{{msg}}</p>
      {% endfor %}
      {%endif%}
      {%endwith%}

    </div>
  </div>
</div>

{% endblock %}